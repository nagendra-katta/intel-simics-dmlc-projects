<!doctype html>
<head>
<meta charset="utf-8">
<title>RISC-V CPU Release Notes</title>
<link rel="stylesheet" href="../simics.css">
<script src="../page-script.js"></script>
</head>
<div class="chain"><a href="index.single-page.html" target=_blank>üñ®Ô∏è Single Page</a></div>
<div class="path"></div><h1 id="risc-v-cpu-release-notes"><a href="#risc-v-cpu-release-notes">RISC-V CPU Release Notes</a></h1>
<p>This document identifies important information for the RISC-V CPU package
for Simics 7.
All users of this specific package should review this document carefully.</p>
<h2 id="changes-since-version-7-0-0"><a href="#changes-since-version-7-0-0">Changes Since Version 7.0.0</a></h2>
<p>The following is a list of changes since the initial 7.0.0 release.</p>
<h2 id="7-17-0-build-7079"><a href="#7-17-0-build-7079">7.17.0 (build 7079)</a></h2>
<h3 id="cpu-generic"><a href="#cpu-generic">CPU generic</a></h3>
<ul>
<li>New probes were added to measure the wall clock time spent in uncore simulation. Currently this is only for memory mapped IO activities. The new probe-kinds are: <code>cpu.time.uncore</code>, <code>cell.time.uncore</code>, and <code>sim.time.uncore</code>.</li>
</ul>
<h2 id="7-16-0-build-7075"><a href="#7-16-0-build-7075">7.16.0 (build 7075)</a></h2>
<h2 id="7-15-0-build-7072"><a href="#7-15-0-build-7072">7.15.0 (build 7072)</a></h2>
<h3 id="cpu-generic-2"><a href="#cpu-generic-2">CPU generic</a></h3>
<ul>
<li>Fixed a bug in the instrumentation framework. Previously, removed instrumentation callbacks could continue to block VMP from executing, bug SIMICS-23063.</li>
</ul>
<h2 id="7-14-0-build-7069"><a href="#7-14-0-build-7069">7.14.0 (build 7069)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes"><a href="#generic-risc-v-cpu-model-changes">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>Added port <code>nmi_vector</code> exposing interface uint64_state. It can be used to update nmi_vector during runtime.</li>
<li>Corrected unaligned memory accesses crossing page boundary.</li>
</ul>
<h2 id="7-13-0-build-7064"><a href="#7-13-0-build-7064">7.13.0 (build 7064)</a></h2>
<h3 id="cpu-generic-3"><a href="#cpu-generic-3">CPU generic</a></h3>
<ul>
<li><code>transaction_translators</code> that needs to perform side effects on a page access can now deny a <code>inquiry</code> direct memory lookup from CPUs. The CPU will follow up with a real access and then retry the direct memory lookup. Before this change, such behavior by <code>transaction_translator</code> would significantly degrade the runtime Simics performance (fixes SIMICS-19940).</li>
</ul>
<h2 id="7-12-0-build-7063"><a href="#7-12-0-build-7063">7.12.0 (build 7063)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-2"><a href="#generic-risc-v-cpu-model-changes-2">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>Updated all RISC-V CPU:s to build with Simgen 2.0.1</li>
</ul>
<h2 id="7-11-0-build-7058"><a href="#7-11-0-build-7058">7.11.0 (build 7058)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-3"><a href="#generic-risc-v-cpu-model-changes-3">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>In some cases, the RISC-V models now start JIT compilation earlier,
since some corner-cases previously did not initiate JIT compilation.
This could result in slightly higher performance.</li>
</ul>
<h2 id="7-10-0-build-7055"><a href="#7-10-0-build-7055">7.10.0 (build 7055)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-4"><a href="#generic-risc-v-cpu-model-changes-4">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>Implementation of atomic instructions <code>LR</code> and <code>SC</code> that accesses device registers or not yet accessed memory now acquires the cell instead of requesting serialized execution.</li>
</ul>
<h2 id="7-9-0-build-7053"><a href="#7-9-0-build-7053">7.9.0 (build 7053)</a></h2>
<h3 id="risc-v-interrupt-controllers"><a href="#risc-v-interrupt-controllers">RISC-V Interrupt Controllers</a></h3>
<ul>
<li>New attribute <code>error_on_incorrect_sized_access</code> is added to CLINT. When set accesses with size not matching the register looked for will get <code>Sim_PE_IO_Error</code> returned.</li>
</ul>
<h2 id="7-8-0-build-7050"><a href="#7-8-0-build-7050">7.8.0 (build 7050)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-5"><a href="#generic-risc-v-cpu-model-changes-5">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>Added support of the <code>fence.tso</code> instruction.</li>
</ul>
<h2 id="7-7-0-build-7028"><a href="#7-7-0-build-7028">7.7.0 (build 7028)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-6"><a href="#generic-risc-v-cpu-model-changes-6">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>Added generic support for NMI. New signal <code>port.NMI</code>, new attribute <code>nmi_vector</code> to control the vector used and new attribute <code>nmi_signal_cause</code> to control the values used in mcause when the NMI signal is raised.</li>
</ul>
<h2 id="7-6-0-build-7023"><a href="#7-6-0-build-7023">7.6.0 (build 7023)</a></h2>
<h3 id="common"><a href="#common">Common</a></h3>
<ul>
<li>The signing certificate on Simics packages has been updated.</li>
</ul>
<h2 id="7-5-0-build-7019"><a href="#7-5-0-build-7019">7.5.0 (build 7019)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-7"><a href="#generic-risc-v-cpu-model-changes-7">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>The extensions presented with the <code>info</code> command has been improved. The list of extensions is now presented in the correct order and based on the settings in the <code>extensions</code> port object.</li>
</ul>
<h2 id="7-4-0-build-7017"><a href="#7-4-0-build-7017">7.4.0 (build 7017)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-8"><a href="#generic-risc-v-cpu-model-changes-8">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>The <code>print-pmp-regions</code> command is added. It will list PMP-regions currently setup in the PMP-registers.</li>
</ul>
<h2 id="7-3-0-build-7016"><a href="#7-3-0-build-7016">7.3.0 (build 7016)</a></h2>
<h3 id="cpu-generic-4"><a href="#cpu-generic-4">CPU generic</a></h3>
<ul>
<li>The size of the module global JIT area has increased from 64MB to 256MB. Workloads with very large instruction footprint, could fill up the entire JIT code area, resulting in a flush and slow recompilation.</li>
<li>Linux only: If the kernel supports Transparent Huge Pages (THP), the JIT code area now makes use of 2MB TLB mappings. This could slightly increase execution performance.</li>
</ul>
<h3 id="generic-risc-v-cpu-model-changes-9"><a href="#generic-risc-v-cpu-model-changes-9">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>New interface <code>riscv_custom_csr</code> added enable implementation of custom CSRs.</li>
<li>New interface <code>riscv_instrumentation_action</code> added to simplify implementation of custom instruction semantics.</li>
</ul>
<h2 id="7-2-0-build-7009"><a href="#7-2-0-build-7009">7.2.0 (build 7009)</a></h2>
<h3 id="generic-risc-v-cpu-model-changes-10"><a href="#generic-risc-v-cpu-model-changes-10">Generic RISC-V CPU model Changes</a></h3>
<ul>
<li>Don't allow instructions to update locked pmpaddr-registers.</li>
<li>Improved checkpoint recoverability for <code>mcycle</code> and <code>minstret</code> (fixes SIMINT-1612).</li>
</ul>
<h2 id="7-1-0-build-7007"><a href="#7-1-0-build-7007">7.1.0 (build 7007)</a></h2>
<h3 id="common-2"><a href="#common-2">Common</a></h3>
<ul>
<li>Updated the batch (<code>.bat</code>) files in the <code>bin</code> folder so that they do not leak environment variables to the current <code>cmd.exe</code> command shell on Windows (fixes SIMICS-21906).</li>
</ul>
<h2 id="7-0-0-build-7006"><a href="#7-0-0-build-7006">7.0.0 (build 7006)</a></h2>
<h2 id="changes-since-previous-major-in-initial-release"><a href="#changes-since-previous-major-in-initial-release">Changes Since Previous Major in Initial Release</a></h2>
<p>The following is a list of changes in 7.0.0 since the previous major.</p>
<h3 id="risc-v-generic-package-changes"><a href="#risc-v-generic-package-changes">RISC-V Generic Package Changes</a></h3>
<ul>
<li>The locking of PMP entry was not correctly implemented (fixes SIMINT-1596).</li>
<li>The package now contains a file <code>third-party-programs.txt</code> with a list of third party software included in the package.</li>
</ul>

<div class="chain">
<span></span>
</div>